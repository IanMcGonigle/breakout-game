(function(t){function e(e){for(var n,a,s=e[0],c=e[1],l=e[2],p=0,f=[];p<s.length;p++)a=s[p],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&f.push(i[a][0]),i[a]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(f.length)f.shift()();return o.push.apply(o,l||[]),r()}function r(){for(var t,e=0;e<o.length;e++){for(var r=o[e],n=!0,s=1;s<r.length;s++){var c=r[s];0!==i[c]&&(n=!1)}n&&(o.splice(e--,1),t=a(a.s=r[0]))}return t}var n={},i={app:0},o=[];function a(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=t,a.c=n,a.d=function(t,e,r){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(r,n,function(e){return t[e]}.bind(null,n));return r},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/breakout-game/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;o.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"0500":function(t,e,r){"use strict";var n=r("5272"),i=r.n(n);i.a},4059:function(t,e,r){"use strict";var n=r("6fa7"),i=r.n(n);i.a},5272:function(t,e,r){},"56d7":function(t,e,r){"use strict";r.r(e);r("cadf"),r("551c"),r("f751"),r("097d");var n=r("2b0e"),i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("div",{staticClass:"wrapper"},[r("router-view")],1)])},o=[],a=(r("8e6e"),r("ac6a"),r("456d"),r("bd86")),s=r("2f62");function c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(r,!0).forEach((function(e){Object(a["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var u={name:"App",created:function(){this.initHighscores()},methods:l({},Object(s["b"])(["initHighscores"]))},p=u,f=(r("5c0b"),r("2877")),h=Object(f["a"])(p,i,o,!1,null,null,null),d=h.exports,b=r("8c4f"),v=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"home"},[r("h1",{staticClass:"rb-shadow",class:{"animated-rainbow":t.hover}},[t._v("Breakout!")]),r("div",{staticClass:"form-wrapper"},[r("label",[t._v("Enter your name")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],attrs:{type:"text"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),r("button",{on:{click:t.onClick,mouseover:function(e){t.hover=!0},mouseleave:function(e){t.hover=!1}}},[t._v("Play")])])])},m=[];r("7f7f");function y(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function O(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?y(r,!0).forEach((function(e){Object(a["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):y(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var g={name:"home",data:function(){return{name:"",hover:!1}},mounted:function(){this.resetGame()},methods:O({},Object(s["b"])(["setPlayer","resetGame"]),{onClick:function(){this.name&&this.setPlayer(this.name),this.$router.push("game")}})},w=g,P=(r("f619"),Object(f["a"])(w,v,m,!1,null,"194a8a8c",null)),j=P.exports,_=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"about"},[r("h1",[t._v("High Scores")]),r("table",{staticClass:"score-wrapper"},[r("th",{staticClass:"rank"},[t._v("rank")]),r("th",[t._v("player")]),r("th",[t._v("score")]),r("tbody",t._l(t.highscores,(function(e,n){return r("tr",{class:{current:t.isActive(e)}},[r("td",{staticClass:"rank"},[t._v(t._s(n+1))]),r("td",[t._v(t._s(e.user))]),r("td",[t._v(t._s(e.score))])])})),0)]),r("router-link",{staticClass:"btn",attrs:{to:"/game"}},[t._v("replay")]),r("router-link",{staticClass:"btn",attrs:{to:"/"}},[t._v("quit")])],1)},k=[];function S(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function E(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?S(r,!0).forEach((function(e){Object(a["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):S(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var C={name:"about",data:function(){return{name:"",hover:!1,activeSet:!1}},created:function(){this.initHighscores()},mounted:function(){this.activeSet=!1},computed:E({},Object(s["c"])(["highscores","score","player"])),methods:E({},Object(s["b"])(["setPlayer","resetGame","initHighscores"]),{isActive:function(t){var e=this.player===t.user&&this.score===t.score;return e},onClick:function(){this.name&&this.setPlayer(this.name),this.$router.push("game")}})},D=C,x=(r("0500"),Object(f["a"])(D,_,k,!1,null,"7ab0fb26",null)),A=x.exports,T=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.gameover?r("div",{staticClass:"blackout"},[r("div",{staticClass:"container"},[r("h1",{staticClass:"rb-shadow animated-rainbow"},[t._v("GAME OVER")]),r("h1",[t._v(t._s(t.player)+" : score "+t._s(t.score))]),r("div",{staticClass:"controls"},[r("button",{staticClass:"btn",on:{click:t.resetGame}},[t._v("replay")]),r("router-link",{staticClass:"btn",attrs:{to:"/about"}},[t._v("scores")]),r("router-link",{staticClass:"btn",attrs:{to:"/"}},[t._v("quit")])],1)])]):r("div",[r("div",{staticClass:"container"},[r("app-scoreboard"),r("div",{ref:"board",staticClass:"board"},[r("div",{staticClass:"field"},t._l(t.brickCount,(function(e,n){return r("div",{key:n,ref:"bricks",refInFor:!0,staticClass:"brick",class:["band-"+Math.floor(n/(t.brickCount/5))],attrs:{"data-points":Math.floor(n/16)},on:{click:function(e){return t.toggleBrick(n)}}})})),0),r("app-ball",{ref:"ball",attrs:{position:t.ballPosition}}),r("app-paddle",{ref:"paddle",attrs:{active:!t.paused}})],1),r("button",{on:{click:t.togglePlay}},[t._v(t._s(t.paused?"play":"pause"))]),r("button",{on:{click:t.toggleMute}},[t._v(t._s(t.muted?"unmute":"mute"))])],1)])},L=[],B=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{ref:"paddle",style:{width:t.width,left:t.percent}},[t._v(t._s(t.level))])},I=[];function M(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function $(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?M(r,!0).forEach((function(e){Object(a["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):M(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var R={name:"Paddle",props:["active"],data:function(){return{baseWidth:8,postion:0,maxSpeed:5,currentSpeed:0,direction:0,drag:.75,keydown:!1}},mounted:function(){var t=this;window.addEventListener("keydown",(function(e){t.updatePostion(e.key)})),window.addEventListener("keyup",(function(e){"ArrowLeft"!==e.key&&"ArrowRight"!==e.key||(t.keydown=!1)})),window.addEventListener("touchstart",this.onTouch),window.addEventListener("touchmove",this.onTouch),window.addEventListener("touchend",(function(){t.keydown=!1})),this.resetPosition()},computed:$({},Object(s["c"])({tick:function(t){return t.tick},lives:function(t){return t.lives},level:function(t){return t.level}}),{percent:function(){var t=this.postion;return"calc(".concat(t,"%)")},maxLeft:function(){return 100-100/this.denominator},denominator:function(){return Math.min(16,this.baseWidth/(2/this.level))},width:function(){return"".concat(100/this.denominator,"%")}}),watch:{tick:function(){this.loop()},lives:function(){this.resetPosition()},level:function(){this.resetPosition()}},methods:{onTouch:function(t){if(this.$refs.paddle){var e=t.touches[0],r=this.$refs.paddle.getBoundingClientRect();e.pageX<=r.left?this.updatePostion("ArrowLeft"):e.pageX>=r.left+r.width?this.updatePostion("ArrowRight"):this.keydown=!1}},updatePostion:function(t){if(this.active)switch(t){case"ArrowLeft":this.keydown=!0,this.direction=-1,this.currentSpeed+=.75;break;case"ArrowRight":this.keydown=!0,this.direction=1,this.currentSpeed+=.75;break}},resetPosition:function(){this.postion=50-100/this.denominator/2},loop:function(){var t=this.currentSpeed,e=this.postion;this.keydown?(t=this.currentSpeed+.05,t=Math.min(t,this.maxSpeed),this.currentSpeed=t):(t=this.currentSpeed*this.drag,this.currentSpeed=t),e=this.postion+this.currentSpeed*this.direction,e<0&&(e=0,this.currentSpeed=0),e>this.maxLeft&&(e=this.maxLeft,this.currentSpeed=0),this.postion=e}}},G=R,H=(r("4059"),Object(f["a"])(G,B,I,!1,null,"522cb1e7",null)),U=H.exports,F=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{ref:"ball",style:t.inlineStyle})},q=[],V={name:"Ball",props:["position"],computed:{inlineStyle:function(){return"left: ".concat(this.position.x,"%; top: ").concat(this.position.y,"%")}}},z=V,N=(r("e550"),Object(f["a"])(z,F,q,!1,null,"51d82598",null)),J=N.exports,Y=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"root"},[r("header",[r("router-link",{attrs:{to:"/"}},[r("h1",[t._v("Breakout!")])])],1),r("div",{staticClass:"scoreboard"},[r("div",{staticClass:"level"},[t._v("Level "+t._s(t.level))]),r("div",{staticClass:"lives"},t._l(t.lives,(function(t){return r("div",{staticClass:"life"})})),0),r("div",{staticClass:"score"},[t._v(t._s(t.player)+" Score: "+t._s(t.score))])])])},K=[];function W(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function X(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?W(r,!0).forEach((function(e){Object(a["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):W(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Q={name:"ScoreBoard",computed:X({},Object(s["c"])(["score","player","lives","level"]))},Z=Q,tt=(r("a717"),Object(f["a"])(Z,Y,K,!1,null,"3a6be346",null)),et=tt.exports,rt=function(){var t=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:440,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"square",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.25,n=new AudioContext,i=n.createOscillator(),o=n.createGain();o.gain.value=.105,i.type=e,i.frequency.setValueAtTime(t,n.currentTime),o.connect(n.destination),i.connect(o),i.start(),i.stop(n.currentTime+r)};return{mute:!1,init:function(){var t=this;window.addEventListener("keydown",(function(e){switch(e.key){case"m":t.toggleMute();break}}))},playBrick:function(){this.mute||t()},playBall:function(){this.mute||t(220)},playMiss:function(){this.mute||t(98)},playGameover:function(){this.mute||t(55,"square",1)},toggleMute:function(){this.mute=!this.mute},setMute:function(t){this.mute=t}}};function nt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function it(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?nt(r,!0).forEach((function(e){Object(a["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nt(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var ot=new rt;ot.init();var at={name:"Game",components:{"app-paddle":U,"app-ball":J,"app-scoreboard":et},data:function(){return{brickCount:40,hitCount:0,paused:!0,loopInterval:null,ballPosition:{x:50,y:50},ballDirection:{x:1,y:1},ballSpeed:{x:.5,y:.5,max:2.75},muted:!1}},computed:it({},Object(s["c"])({level:function(t){return t.level},player:function(t){return t.player},score:function(t){return t.score},gameover:function(t){return t.gameover}}),{isMuted:function(){return ot.mute}}),watch:{level:function(){this.initializeBall(),this.resetField(),this.resetTurn()},gameover:function(){this.gameover&&ot.playGameover()}},mounted:function(){this.initializeBall()},methods:it({},Object(s["b"])(["updateTick","addScore","loseLife","levelUp","playAgain"]),{toggleMute:function(){var t=ot.mute;this.muted=!t,ot.setMute(this.muted)},togglePlay:function(){this.paused=!this.paused,this.paused&&this.loopInterval?cancelAnimationFrame(this.loopInterval):requestAnimationFrame(this.loop)},toggleBrick:function(t){var e=this.$refs.bricks[t];e.classList.add("brick-hit"),this.hitCount++},initializeBall:function(){var t=Math.min(this.ballSpeed.max,.5*this.level);this.ballSpeed.x=0,this.ballSpeed.y=t,this.ballPosition.x=50,this.ballPosition.y=50,this.ballDirection.x=1,this.ballDirection.y=1},onLoseBall:function(){this.loseLife(),this.resetTurn()},onClearField:function(){this.levelUp()},resetField:function(){this.hitCount=0,this.$refs.bricks.forEach((function(t){t.classList.remove("brick-hit")}))},resetTurn:function(){this.togglePlay(),this.initializeBall()},resetGame:function(){this.playAgain()},loop:function(){if(this.loopInterval=requestAnimationFrame(this.loop),this.$refs.ball.$el&&this.$refs.paddle.$el&&this.$refs.board&&this.$refs.bricks){this.hitCount===this.brickCount&&this.onClearField();var t=this.$refs.ball.$el.getBoundingClientRect(),e=this.$refs.paddle.$el.getBoundingClientRect(),r=this.$refs.board.getBoundingClientRect(),n=this.$refs.bricks;if(t.y>r.bottom-t.height&&(this.onLoseBall(),ot.playMiss()),t.y<r.top&&(this.ballDirection.y=1,ot.playBall()),t.x>r.right-t.width-7.5&&(this.ballDirection.x=-1,ot.playBall()),t.x<r.left+7.5&&(this.ballDirection.x=1,ot.playBall()),t.y>e.y-t.height&&t.x>e.left&&t.x<e.right){this.ballDirection.y=-1;var i=t.left-e.left,o=i/e.width-.5;this.ballSpeed.x=Math.abs(o),ot.playBall()}for(var a=0;a<n.length;a++){var s=n[a];if(!s.classList.contains("brick-hit")){var c=s.getBoundingClientRect(),l=!(t.right<c.left||t.left>c.right||t.bottom<c.top||t.top>c.bottom);if(l){s.classList.add("brick-hit"),ot.playBrick();var u=(4-parseInt(s.getAttribute("data-points")))/50,p=Math.min(this.ballSpeed.y+u,this.ballSpeed.max);this.ballSpeed.y=p,this.ballDirection.y=1===this.ballDirection.y?-1:1,this.hitCount++,this.addScore(50);break}}}this.ballPosition.x=this.ballPosition.x+this.ballSpeed.x*this.ballDirection.x,this.ballPosition.y=this.ballPosition.y+this.ballSpeed.y*this.ballDirection.y,this.muted=ot.mute,this.updateTick()}}})},st=at,ct=(r("7f73"),Object(f["a"])(st,T,L,!1,null,"5bd15a80",null)),lt=ct.exports;n["a"].use(b["a"]);var ut=new b["a"]({routes:[{path:"/",name:"home",component:j},{path:"/about",name:"about",component:A},{path:"/game",name:"game",component:lt}]}),pt=(r("5df3"),r("4f7f"),r("8aa5")),ft=r.n(pt);function ht(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function dt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ht(r,!0).forEach((function(e){Object(a["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ht(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}n["a"].use(s["a"]);var bt={apiKey:"AIzaSyBjZqbncimJ_Fn7A1eizTOGJmfmy_0DhMQ",authDomain:"breakout-2f7a9.firebaseapp.com",databaseURL:"https://breakout-2f7a9.firebaseio.com",projectId:"breakout-2f7a9",storageBucket:"breakout-2f7a9.appspot.com",messagingSenderId:"255607378101",appId:"1:255607378101:web:ae18730425557a93082efc"};ft.a.initializeApp(bt);var vt=ft.a.firestore();vt.settings({timestampsInSnapshots:!0});var mt={tick:Date.now(),score:0,player:"Player 1",lives:3,level:1,gameover:!1,highscores:[]},yt=new s["a"].Store({state:dt({},mt),mutations:{UPDATE_TICK:function(t){t.tick=Date.now()},SET_SCORE:function(t,e){t.score=e},SET_PLAYER:function(t,e){t.player=e},LEVEL_UP:function(t){t.level=t.level+1},UPDATE_LIVES:function(t,e){t.lives=e},RESET_GAME:function(t){for(var e in mt)t[e]=mt[e]},PLAY_AGAIN:function(t){var e=t.player;for(var r in mt)t[r]=mt[r];t.player=e},UPDATE_GAMEOVER:function(t,e){t.gameover=e},INIT_HIGH_SCORES:function(t,e){t.highscores=e}},actions:{updateTick:function(t){t.commit("UPDATE_TICK")},addScore:function(t,e){t.commit("SET_SCORE",t.state.score+e)},resetScore:function(t){t.commit("SET_SCORE",0)},setPlayer:function(t,e){t.commit("SET_PLAYER",e)},resetGame:function(t){t.commit("RESET_GAME")},levelUp:function(t){t.commit("LEVEL_UP")},loseLife:function(t){var e=t.state.lives-1;e>0?t.commit("UPDATE_LIVES",e):vt.collection("scores").add({user:t.state.player,score:t.state.score}).then((function(e){console.log("res ",e),t.commit("UPDATE_GAMEOVER",!0)}))},playAgain:function(t){t.commit("PLAY_AGAIN")},initHighscores:function(t){vt.collection("scores").orderBy("score").get().then((function(e){var r=e.docs.map((function(t){return t.data()})),n=new Set,i=r.filter((function(t){var e="".concat(t.user,"_").concat(t.score),r=n.has(e);return n.add(e),!r}));t.commit("INIT_HIGH_SCORES",i.reverse())})).catch((function(e){console.log("the was an error ",e),t.commit("INIT_HIGH_SCORES",t.store.highscores)}))}}});n["a"].config.productionTip=!1,new n["a"]({router:ut,store:yt,render:function(t){return t(d)}}).$mount("#app")},"5c0b":function(t,e,r){"use strict";var n=r("e332"),i=r.n(n);i.a},"6fa7":function(t,e,r){},"7f73":function(t,e,r){"use strict";var n=r("bee6"),i=r.n(n);i.a},"81a9":function(t,e,r){},a717:function(t,e,r){"use strict";var n=r("81a9"),i=r.n(n);i.a},b3a2:function(t,e,r){},bee6:function(t,e,r){},e332:function(t,e,r){},e4a0:function(t,e,r){},e550:function(t,e,r){"use strict";var n=r("e4a0"),i=r.n(n);i.a},f619:function(t,e,r){"use strict";var n=r("b3a2"),i=r.n(n);i.a}});
//# sourceMappingURL=app.b696ec95.js.map